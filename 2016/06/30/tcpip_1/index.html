<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="google-site-verification" content="xBT4GhYoi5qRD5tr338pgPM5OWHHIDR6mNg1a3euekI" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Be honest with yourself and then the world.">
    <meta name="keyword"  content="Dylan">
    <link rel="shortcut icon" href="/img/favicon.ico">

    <title>
        
        TCP/IP卷1笔记大纲 - Dylan326 的博客 | Dylan326&#39;s Blog
        
    </title>

    <!-- Custom CSS -->
    
<link rel="stylesheet" href="/css/aircloud.css">

    
<link rel="stylesheet" href="/css/gitment.css">

    <!--<link rel="stylesheet" href="https://imsun.github.io/gitment/style/default.css">-->
    <link href="//at.alicdn.com/t/font_620856_pl6z7sid89qkt9.css" rel="stylesheet" type="text/css">
    <!-- ga & ba script hoook -->
    <script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?1c71474bf99cabdd014cb2284d21e83e";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>

<meta name="generator" content="Hexo 6.2.0"></head>

<body>

<div class="site-nav-toggle" id="site-nav-toggle">
    <button>
        <span class="btn-bar"></span>
        <span class="btn-bar"></span>
        <span class="btn-bar"></span>
    </button>
</div>

<div class="index-about">
    <i> Be honest with yourself and then the world. </i>
</div>

<div class="index-container">
    
    <div class="index-left">
        
<div class="nav" id="nav">
    <div class="avatar-name">
        <div class="avatar radius">
            <img src="/img/avatar.jpg" />
        </div>
        <div class="name">
            <i>Dylan326</i>
        </div>
    </div>
    <div class="contents" id="nav-content">
        <ul>
            <li >
                <a href="/">
                    <i class="iconfont icon-shouye1"></i>
                    <span>HOME</span>
                </a>
            </li>
            <li >
                <a href="/tags">
                    <i class="iconfont icon-biaoqian1"></i>
                    <span>TAGS</span>
                </a>
            </li>
            <li >
                <a href="/archives">
                    <i class="iconfont icon-guidang2"></i>
                    <span>ARCHIVES</span>
                </a>
            </li>
            <li >
                <a href="/about/">
                    <i class="iconfont icon-guanyu2"></i>
                    <span>ABOUT</span>
                </a>
            </li>
            
            <li>
                <a id="search">
                    <i class="iconfont icon-sousuo1"></i>
                    <span>SEARCH</span>
                </a>
            </li>
            
        </ul>
    </div>
    
        <div id="toc" class="toc-article">
    <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%8D%8F%E8%AE%AE%E5%8D%B71%E5%A4%87%E6%B3%A8%E7%AC%94%E8%AE%B0"><span class="toc-text">协议卷1备注笔记</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%9B%E5%B1%82%E7%BD%91%E7%BB%9C%E5%BA%94%E7%94%A8%E6%A8%A1%E5%9E%8B"><span class="toc-text">四层网络应用模型</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%94%E7%B1%BB%E4%BA%92%E8%81%94%E7%BD%91%E5%9C%B0%E5%9D%80"><span class="toc-text">五类互联网地址</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9F%9F%E5%90%8D%E7%B3%BB%E7%BB%9FDNS-%E5%AE%9E%E9%99%85%E4%B8%BA%E4%B8%80%E4%B8%AA%E5%88%86%E5%B8%83%E5%BC%8F%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-text">域名系统DNS 实际为一个分布式数据库</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%81%E8%A3%85%E4%B8%8E%E5%88%86%E7%94%A8-%E5%B0%81%E8%A3%85"><span class="toc-text">封装与分用-封装</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%81%E8%A3%85%E4%B8%8E%E5%88%86%E7%94%A8-%E5%88%86%E7%94%A8"><span class="toc-text">封装与分用-分用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%8E%AF%E5%9B%9E%E6%8E%A5%E5%8F%A3"><span class="toc-text">环回接口</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#IP%E7%BD%91%E9%99%85%E5%8D%8F%E8%AE%AE"><span class="toc-text">IP网际协议</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ARP%E5%9C%B0%E5%9D%80%E8%A7%A3%E6%9E%90%E5%8D%8F%E8%AE%AE"><span class="toc-text">ARP地址解析协议</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ICMP-%E7%BD%91%E7%BB%9C%E6%8E%A7%E5%88%B6%E6%8A%A5%E6%96%87%E5%8D%8F%E8%AE%AEInternet-Control-Message-Protocol"><span class="toc-text">ICMP 网络控制报文协议Internet Control Message Protocol</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B9%BF%E6%92%AD%E5%A4%9A%E6%92%AD%E5%8D%95%E6%92%AD"><span class="toc-text">广播多播单播</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#IGMP-internet%E7%BB%84%E7%AE%A1%E7%90%86%E5%8D%8F%E8%AE%AE"><span class="toc-text">IGMP internet组管理协议</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#DNS%E5%9F%9F%E5%90%8D%E7%B3%BB%E7%BB%9F"><span class="toc-text">DNS域名系统</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#TCP%E4%BC%A0%E8%BE%93%E6%8E%A7%E5%88%B6%E5%8D%8F%E8%AE%AE"><span class="toc-text">TCP传输控制协议</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%BB%91%E5%8A%A8%E7%AA%97%E5%8F%A3"><span class="toc-text">滑动窗口</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B6%85%E6%97%B6%E5%92%8C%E9%87%8D%E4%BC%A0%E6%9C%BA%E5%88%B6"><span class="toc-text">超时和重传机制</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%90%8E%E8%AE%B0"><span class="toc-text">后记</span></a></li></ol></li></ol></li></ol>
</div>
    
</div>


<div class="search-field" id="search-field">
    <div class="search-container">
        <div class="search-input">
            <span id="esc-search"> <i class="icon-fanhui iconfont"></i></span>
            <input id="search-input"/>
            <span id="begin-search">search</span>
        </div>
        <div class="search-result-container" id="search-result-container">

        </div>
    </div>
</div>

        <div class="index-about-mobile">
            <i> Be honest with yourself and then the world. </i>
        </div>
    </div>
    
    <div class="index-middle">
        <!-- Main Content -->
        


<div class="post-container">
    <div class="post-title">
        TCP/IP卷1笔记大纲
    </div>

    <div class="post-meta">
        <span class="attr">Post：<span>2016-06-30 19:59</span></span>
        
        <span class="attr">Tags：/
        
        <a class="tag" href="/tags/#网络" title="网络">网络</a>
        <span>/</span>
        
        <a class="tag" href="/tags/#TCP/IP" title="TCP/IP">TCP/IP</a>
        <span>/</span>
        
        
        </span>
        <span class="attr">Visit：<span id="busuanzi_value_page_pv"></span>
</span>
</span>
    </div>
    <div class="post-content no-indent">
        <h1 id="协议卷1备注笔记"><a href="#协议卷1备注笔记" class="headerlink" title="协议卷1备注笔记"></a>协议卷1备注笔记</h1><h2 id="四层网络应用模型"><a href="#四层网络应用模型" class="headerlink" title="四层网络应用模型"></a>四层网络应用模型</h2><p>1.应用层 ftp email telnet<br>2.传输层 TCP UDP<br>3.网络层 IP（ICMP IGMP）<br>4.链路层 设备驱动程序及接口卡（arp-地址解析协议 rarp-反地址解析协议）<br>传输层提供端到端， IP层提供点到点  </p>
<span id="more"></span>

<h2 id="五类互联网地址"><a href="#五类互联网地址" class="headerlink" title="五类互联网地址"></a>五类互联网地址</h2><p>A 0.0.0.0<del>127.255.255.255<br>B 128.0.0.0</del>191.255.255.255<br>C 192.0.0.0<del>223.255.255.255<br>D 224.0.0.0</del>239.255.255.255<br>E 240.0.0.0~247.255.255.255  </p>
<h2 id="域名系统DNS-实际为一个分布式数据库"><a href="#域名系统DNS-实际为一个分布式数据库" class="headerlink" title="域名系统DNS 实际为一个分布式数据库"></a>域名系统DNS 实际为一个分布式数据库</h2><p>子网掩码 192.0.2.96&#x2F;24表示的是一个前24位被用作网络号的IP地址（和255.255.255.000的意思一样）<br>计算方式是位与运算，如：<br>类别<br>起始位<br>开始<br>结束<br>点分十进制掩码<br>A  </p>
<p>0</p>
<p>0.0.0.0  </p>
<p>127.0.0.0  </p>
<p>255.0.0.0  </p>
<p>B  </p>
<p>10  </p>
<p>128.0.0.0  </p>
<p>191.255.0.0  </p>
<p>255.255.0.0  </p>
<p>C  </p>
<p>110  </p>
<p>192.0.0.0  </p>
<p>223.255.255.0  </p>
<p>255.255.255.0  </p>
<h3 id="封装与分用-封装"><a href="#封装与分用-封装" class="headerlink" title="封装与分用-封装"></a>封装与分用-封装</h3><p>TCP数据段（tcp segment）<br>IP数据报文 （ip datagram）<br>以太网数据帧（frame）46~1500（字节 可设置）<br>IP头有一个8bit的协议域，标示协议类型1&#x3D;ICMP 2&#x3D;IGMP 6&#x3D;TCP 17&#x3D;UDP</p>
<h3 id="封装与分用-分用"><a href="#封装与分用-分用" class="headerlink" title="封装与分用-分用"></a>封装与分用-分用</h3><p>端口号：<br>大部分知名端口号为奇数? 半双工历史<br>tcp 23<br>udp 53  </p>
<h3 id="环回接口"><a href="#环回接口" class="headerlink" title="环回接口"></a>环回接口</h3><p>国际惯例ip是127.0.0.1  并设置localhost</p>
<h3 id="IP网际协议"><a href="#IP网际协议" class="headerlink" title="IP网际协议"></a>IP网际协议</h3><p>ip不可靠性。<br>ip无连接。 每个ip数据报文独立， 可以没有先后顺序<br>网络字节序：大端字节序<br>TTL 生存时间，一般为源主机设置  </p>
<h3 id="ARP地址解析协议"><a href="#ARP地址解析协议" class="headerlink" title="ARP地址解析协议"></a>ARP地址解析协议</h3><p>ARP功能是IP地址和不同网络技术的硬件地址做一个映射。arp发出一个arp数据请求给每个以太网上的主机，对应主机符合后回复arp应答，发送ip报文到目标主机<br>RARP 是许多无盘系统在引导时候获取ip地址的</p>
<h3 id="ICMP-网络控制报文协议Internet-Control-Message-Protocol"><a href="#ICMP-网络控制报文协议Internet-Control-Message-Protocol" class="headerlink" title="ICMP 网络控制报文协议Internet Control Message Protocol"></a>ICMP 网络控制报文协议Internet Control Message Protocol</h3><p>常用于返回错误信息及分析路由，如 ping（icmp echo的request和reply） traceroute</p>
<p>PING<br>不经过传输层，仅为ICMP的echo的request和reply</p>
<p>IP分片<br>MTU 以太网硬件（网卡）一般设置为1500：例如：IP首20， UDP首8 剩余1472数据字节</p>
<h3 id="广播多播单播"><a href="#广播多播单播" class="headerlink" title="广播多播单播"></a>广播多播单播</h3><p>使用单播IP地址的IP传输方式，叫做IP单播（Unicast），简称为单播。<br>使用广播IP地址的IP传输方式，叫做IP广播（Broadcast），简称为广播。<br>使用组播IP地址的IP传输方式，叫做IP组播（Multicast），简称为组播。<br>广播不实际增加网络通讯量， 但是如ICMP协议端口不可达会额外引起广播流量  </p>
<h3 id="IGMP-internet组管理协议"><a href="#IGMP-internet组管理协议" class="headerlink" title="IGMP internet组管理协议"></a>IGMP internet组管理协议</h3><p>广播长局限于局域网中，多播协议可以降低不参与通讯的主机负担  </p>
<h3 id="DNS域名系统"><a href="#DNS域名系统" class="headerlink" title="DNS域名系统"></a>DNS域名系统</h3><p>一个基于tcpip的分布式缓存</p>
<h3 id="TCP传输控制协议"><a href="#TCP传输控制协议" class="headerlink" title="TCP传输控制协议"></a>TCP传输控制协议</h3><p>面向连接可靠地字节流服务<br>可靠性保障：  </p>
<ul>
<li>tcp segment 数据块封装成ip协议发送  </li>
<li>发送一个段后，启动一个定时器等待回复（自适应超时和重传）  </li>
<li>收到发送端的数据后给一个确认的回复（不一定是立即回复）  </li>
<li>首部和校验和来保证数据正确性  </li>
<li>ip数据报文到达可能无序， tcp对数据报文重排序交给应用层  </li>
<li>IP数据包会重复，需要丢弃重复  </li>
<li>提供流量控制，接收端只容许发送端发送本段缓冲能接收的数据</li>
</ul>
<p>tcp首部中有6个标示bit:  </p>
<ul>
<li>URG 紧急指针  </li>
<li>ACK确认序号有效  </li>
<li>PSH 尽快发送到应用层  </li>
<li>RST 重新建立连接  </li>
<li>SYN 同步序号用来发起一个链接 （ISN 初始序列号，随机+数据包长度）  </li>
<li>FIN 发送完毕</li>
</ul>
<p>三次握手：SYN n-&gt;SYN m、ack n+1-&gt;ack m+1<br>四次握手：FIN n、ack -&gt;ack n+1-&gt;FIN m、ack -&gt;ack m+1  </p>
<p>链接主要状态：<br>S  : Listen&#x3D;被动打开<br>C  : SYN_SENT&#x3D;主动打开<br>SC: ESTABLISHED&#x3D;链接建立<br>C  : FIN_WAIT&#x3D;主动关闭<br>S  : CLOSE_WAIT&#x3D;被动关闭<br>C  : TIME_WAIT&#x3D;关闭等待<br>S  : CLOSED&#x3D;关闭（假想）  </p>
<p>Nagle算法， 尽量的合并发送包，合并条件：  </p>
<ul>
<li>达到MSS（最大segment 大小） 大小 MSS来自MTU（包含IP和tcp或者udp头）  </li>
<li>FIN协议  </li>
<li>tcp nodelay（关闭 Nagle algorithm）  </li>
<li>或者一段时间（200ms）超时</li>
</ul>
<h3 id="滑动窗口"><a href="#滑动窗口" class="headerlink" title="滑动窗口"></a>滑动窗口</h3><p>控制流量避免拥塞。 分为发送窗口和接收窗口  </p>
<h3 id="超时和重传机制"><a href="#超时和重传机制" class="headerlink" title="超时和重传机制"></a>超时和重传机制</h3><p>定时器：  </p>
<ul>
<li>重传定时器  </li>
<li>坚持定时器 使窗口大小信息保持流动  </li>
<li>保活定时器  </li>
<li>2MSL定时器 测量timewait时间</li>
</ul>
<p>超时和重传： 指数避退策略  </p>
<p>插口对（socket pair）套接字对， ip_port-r_ip_port<br>ISN 初始序列号， 随机值  </p>
<p>MSL（最大segment lifetime）<br>TIME_WAIT 为2MSL状态，在等待期内，这部分时间socket pair 不容许被使用  </p>
<h3 id="后记"><a href="#后记" class="headerlink" title="后记"></a>后记</h3><p>待续和完善， 目前简要备注大纲</p>
<hr>
<p><strong>版权声明：本文为博主原创文章，未经允许不得转载。</strong></p>

        
        <br />
        <div id="comment-container">
        </div>
        <div id="disqus_thread"></div>

        <div id="lv-container">
        </div>

    </div>
</div>

    </div>
</div>


<footer class="footer">
    <ul class="list-inline text-center">
        
        

        
        <li>
            <a target="_blank" href="http://weibo.com/youngchou326">
                            <span class="fa-stack fa-lg">
                                  <i class="iconfont icon-weibo"></i>
                            </span>
            </a>
        </li>
        

        

        
        <li>
            <a target="_blank"  href="https://github.com/yangl326-Dylan">
                            <span class="fa-stack fa-lg">
                                <i class="iconfont icon-github"></i>
                            </span>
            </a>
        </li>
        

        
        <li>
            <a target="_blank"  href="https://www.linkedin.com/in/敦飏-周-49a752b7">
                            <span class="fa-stack fa-lg">
                                <i class="iconfont icon-linkedin"></i>
                            </span>
            </a>
        </li>
        

    </ul>
    
    <p>
        <span>/</span>
        
        <span><a target="_blank" rel="noopener" href="https://github.com/yangl326-Dylan">Github</a></span>
        <span>/</span>
        
        <span><a href="http://www.dylan326.com/2013/02/13/about/">About</a></span>
        <span>/</span>
        
        <span><a href="mailto:zhoudunyang@gmail.com">Mail</a></span>
        <span>/</span>
        
    </p>
    
    <p>
        <span id="busuanzi_container_site_pv">
            <span id="busuanzi_value_site_pv"></span>PV
        </span>
        <span id="busuanzi_container_site_uv">
            <span id="busuanzi_value_site_uv"></span>UV
        </span>
        Created By <a target="_blank" rel="noopener" href="https://hexo.io/">Hexo</a>  Theme <a target="_blank" rel="noopener" href="https://github.com/aircloud/hexo-theme-aircloud">AirCloud</a></p>
</footer>




</body>

<script>
    // We expose some of the variables needed by the front end
    window.hexo_search_path = "search.json"
    window.hexo_root = "/"
    window.isPost = true
</script>
<script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script>

<script src="/js/index.js"></script>

<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>




</html>
